<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1" name="viewport" />
<meta content="blog,babashka,pandoc" name="keywords" />
<meta content="Write myself a static site
generator" name="description" />
<title>Put some ink into the inkpot - Write myself a static site
generator</title><link href="atom.xml" rel="alternate" title="Put some ink into the inkpot" type="application/atom+xml" /><link href="/css/output.css" rel="stylesheet" /><link href="/css/default.css" rel="stylesheet" /><link href="/css/table.css" rel="stylesheet" /><link href="/css/hightlight.css" rel="stylesheet" /></head><body class="text-base text-black"><header class="border-b-2 border-black"><div class="logo"><a href="/">Put some ink into the inkpot</a></div><nav class="text-right"><a class="text-black font-bold text-lg no-underline uppercase" href="/archive.html">Archive</a><a class="text-black font-bold text-lg no-underline uppercase" href="/logseq">Note</a><a class="text-black font-bold text-lg no-underline uppercase" href="/atom.xml">RSS</a></nav></header><main><div><article><h1>Write
myself a static site generator</h1><section class="header">
Posted on Mar 20, 2023
by LT
</section><section><div><div class="toc"><div class="header">Table of Contents</div><ul>
<li><a href="#hakyll" id="toc-hakyll"><span
class="toc-section-number">1</span> Hakyll</a></li>
<li><a href="#babashka" id="toc-babashka"><span
class="toc-section-number">2</span> Babashka</a></li>
<li><a href="#conclustion" id="toc-conclustion"><span
class="toc-section-number">3</span> Conclustion</a></li>
</ul></div><div><p>Originally this blog was generated using <a
href="https://jaspervdj.be/hakyll">Hakyll</a>, but after using it for a
while, although I liked its concise and simple design, I still found
some aspects didn’t quite suit my needs. Recently, I happened to
discover <a href="https://babashka.org">Babashka</a>, and I thought I
could use Babashka and Pandoc CLI to implement the functionalities I
used in Hakyll. This blog post mainly introduces my implementation. My
implementation repository can be found <a
href="https://github.com/onemouth/blog-source">here</a>.</p>
<h1 data-number="1" id="hakyll"><span
class="header-section-number">1</span> Hakyll</h1>
<p>First, I’d like to explain how Hakyll, the tool I used to use, works.
Hakyll is a library written in Haskell that provides helper functions
for creating static websites. It uses another library called <a
href="https://hackage.haskell.org/package/pandoc">Pandoc</a> to generate
HTML files, and you can check out the Hakyll website
(https://jaspervdj.be/hakyll/) for more information.</p>
<p>What I love most about Hakyll is how straightforward it is.
Essentially, all you need are some HTML templates, some CSS files, some
markdown files, and a set of rules that allow Pandoc to generate HTML
files from Markdown. Users are free to mix other Haskell libraries with
Hakyll to create their ideal website, without feeling limited by the
framework provided by the static site generator.</p>
<p>However, there were still two aspects that I found difficult to work
with. The first was my own unfamiliarity with the Haskell programming
language, which meant that I had to spend a lot of time researching how
to implement the features I wanted.</p>
<p>The other issue was that, compared to directly using the Pandoc
Library, I preferred to use the <a href="https://pandoc.org/#">Pandoc
command-line interface (CLI)</a>. Pandoc is already a complex software,
with a user manual of about 150 pages, and the functionality provided by
the CLI alone is already quite complex. If I were to use the library
instead, I would also have to deal with the complexity of Pandoc’s
internal implementation and the Haskell programming language. So, for
me, using only the CLI to convert formats is much simpler.</p>
<h1 data-number="2" id="babashka"><span
class="header-section-number">2</span> Babashka</h1>
<p>In fact, several years ago when I began learning Clojure, I had the
idea that a powerful dynamic language like Clojure would be great as a
script language, capable of replacing Python or Bash for some quick
tasks. However, in practice, because Clojure is a dialect running on the
JVM, its startup speed is quite slow, making it not very suitable for
writing CLI tools.</p>
<p>Until recently, I discovered <a
href="https://babashka.org">Babashka</a>, also known as “Fast native
Clojure scripting runtime”. From the introduction on the official
website, Babashka is designed to replace Bash scripts with a new
designed runtime. It uses GraalVM native image technology, which makes
its startup speed comparable to that of Python 3. When I found out about
Babashka, I thought that using it along with other Clojure libraries
would be a good way to quickly implement most of the functionality of
Hakyll.</p>
<p>My plan is to replace the HTML templates in Hakyll with <a
href="https://github.com/weavejester/hiccup">Hicuup</a>. I will also use
the <a href="https://github.com/babashka/process">process library</a>
built into Babashka to call the Pandoc program. Additionally, I will use
Babashka’s <a href="https://book.babashka.org/#tasks">task runner</a> to
implement features such as <code>build</code> and
<code>serve</code>.</p>
<p>The whole process was much easier than I expected and very
interesting. Currently, I have removed the use of Hakyll completely from
the source code. Of course, I haven’t fully implemented all of Hakyll’s
features, but for now it meets my needs. Since I built it myself, I have
a better understanding of the entire website building process and have
more control over it than before.</p>
<h1 data-number="3" id="conclustion"><span
class="header-section-number">3</span> Conclustion</h1>
<p>If you use a static site generator, you may find yourself creating
your own generator. That’s what happened to me - I ended up building my
own
one.</p></div></div></section></article><comment><script async="async" crossorigin="anonymous" data-category-id="DIC_kwDOD5Bpa84COAIg" data-category="General" data-emit-metadata="0" data-input-position="top" data-lang="en" data-mapping="pathname" data-reactions-enabled="0" data-repo-id="MDEwOlJlcG9zaXRvcnkyNjExMjI0MTE=" data-repo="onemouth/onemouth.github.io" data-theme="light" src="https://giscus.app/client.js"></script><script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script></comment></div></main><footer class="mt-12 py-3 border-t-2 border-black text-sm text-gray-500">Site generated by pandoc and babashka</footer></body></html>
